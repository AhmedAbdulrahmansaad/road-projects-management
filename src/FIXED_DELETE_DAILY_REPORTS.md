# โ ุฅุตูุงุญ ุฒุฑ ุญุฐู ุงูุชูุงุฑูุฑ ุงูููููุฉ

## ๐ ุงููุดููุฉ
ุฒุฑ ุญุฐู ุงูุชูุงุฑูุฑ ุงูููููุฉ ูู ููู ูุนูู ุจุณุจุจ:
1. ุงูู route ูุงู ูุญุงูู ุงูุญุฐู ูู `daily_reports_new` ุจุฏูุงู ูู `daily_reports`
2. ูุญุต ุงูุฏูุฑ ูุงู ูุณุชุฎุฏู `general_manager` ููุท ุจุฏูู ุงูุชุญูู ูู ุงูุฃุณูุงุก ุงูุนุฑุจูุฉ

## โ ุงูุญู

### ุงูุชุบููุฑุงุช ูู `/supabase/functions/server/index.tsx`:

```typescript
// BEFORE (ุฎุทุฃ):
if (currentUser.role !== "general_manager") {
  return c.json({ error: "Unauthorized" }, 403);
}

const { error: deleteError } = await supabaseAdmin
  .from("daily_reports_new")  // โ ุฌุฏูู ุฎุงุทุฆ
  .delete()
  .eq("id", reportId);

// AFTER (ุตุญูุญ):
const role = currentUser.role;
if (
  role !== "General Manager" &&
  role !== "ุงููุฏูุฑ ุงูุนุงู" &&
  role !== "general_manager"
) {
  return c.json({ error: "Unauthorized" }, 403);
}

const { error: deleteError } = await supabaseAdmin
  .from("daily_reports")  // โ ุงูุฌุฏูู ุงูุตุญูุญ
  .delete()
  .eq("id", reportId);
```

## ๐๏ธ ุงููููุงุช ุงููุญุฐููุฉ

ุชู ุญุฐู ุงููููุงุช ุงููุฏููุฉ ูุงูุชุฌุฑูุจูุฉ:
- โ `/components/DailyReports.tsx` (ูุฏูู)
- โ `/components/DailyReportsNew.tsx` (ูุฏูู)
- โ `/supabase/functions/server/daily-reports-sql-routes.tsx` (ุชุฌุฑูุจู)
- โ `/supabase/functions/server/index-old-backup.tsx` (ูุณุฎุฉ ุงุญุชูุงุทูุฉ)
- โ `/supabase/functions/server/index-sql.tsx` (ุชุฌุฑูุจู)

## โ ุงููุชูุฌุฉ

ุงูุขู ุฒุฑ ุงูุญุฐู ูุนูู ุจุดูู ุตุญูุญ:
- โ ุงููุฏูุฑ ุงูุนุงู ููุท ููููู ุญุฐู ุงูุชูุงุฑูุฑ
- โ ูุชู ุงูุญุฐู ูู ุงูุฌุฏูู ุงูุตุญูุญ `daily_reports`
- โ ุฑุณุงูุฉ ุชุฃููุฏ ุชุธูุฑ ุนูุฏ ุงูุญุฐู ุงููุงุฌุญ
- โ ุฅุดุนุงุฑ ููุฑุณู ูุฌููุน ุงููุณุชุฎุฏููู ุนูุฏ ุงูุญุฐู

## ๐งช ุงูุงุฎุชุจุงุฑ

1. ุณุฌู ุฏุฎูู ูู **ุงููุฏูุฑ ุงูุนุงู**
2. ุงูุชุญ ุตูุญุฉ ุงูุชูุงุฑูุฑ ุงูููููุฉ
3. ุงุถุบุท ุนูู ุฃููููุฉ ุงูุญุฐู (๐๏ธ) ูุฃู ุชูุฑูุฑ
4. ุฃูุฏ ุงูุญุฐู
5. ุชุญูู ูู ุงุฎุชูุงุก ุงูุชูุฑูุฑ ูู ุงูุฌุฏูู
6. ุชุญูู ูู ุธููุฑ ุฑุณุงูุฉ "ุชู ุญุฐู ุงูุชูุฑูุฑ ุจูุฌุงุญ โ"

---

**ุชู ุงูุฅุตูุงุญ ุจุชุงุฑูุฎ:** 21 ููููุจุฑ 2025
**ุงูุญุงูุฉ:** โ ูุนูู ุจุดูู ุตุญูุญ
